<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Show/Hide Rows</title>
  <script type="text/javascript">
  var parent = window.opener;
  //alert(parent);
  form_len  = parent.document.forms.length - 1
  var no_of_rows = parent.document.forms[form_len].no_of_rows.value;
  var loading = true;

  function print_form ()
  {
    loading = true;
    for (i=1; i < Number(no_of_rows); i++)
    {
      var checked = status(i) ? "checked='checked'" : "";
      var label = get_label(i);
      var description = get_description (i);
      document.write ("<p title='" + description  + "'> <input type='checkbox' " + checked + " onchange='toggle_parent_borders(" + i + ")'/>" + label + "</p>");
    }
    loading = false;
  }

  function toggle_parent_borders (row)
  {
    if (loading == false)
      parent.show_hide (row);
  }

  function status (row)
  {
    return parent.get_row_display_status (row);
  }

  function get_label (row)
  {
    return parent.get_label(row);
  }

  function get_description (row)
  {
    return parent.get_description (row);
  }
  </script>
</head>
<body>
<h4>Show/Hide rows</h4>
  <form action="">
  <script type="text/javascript">print_form()</script>
  <p><input type="button" value="Close" onclick="window.close()"/></p>
  </form>
</body>
</html>
